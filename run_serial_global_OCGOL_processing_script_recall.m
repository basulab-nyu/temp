%% Define the directories for processing - SHORT TERM RECALL

%ANIMAL #1
%I42R 1
path_dir{1} = {'G:\OCGOL_stability_recall\I42R_1\I42R_AB_d1_032118_1',...
    'G:\OCGOL_stability_recall\I42R_1\I42R_AB_d2_032218_2',...
    'G:\OCGOL_stability_recall\I42R_1\I42R_AB_d3_032318_3',...
    'G:\OCGOL_stability_recall\I42R_1\I42R_AB_d6_032618_4_2',...
    'G:\OCGOL_stability_recall\I42R_1\I42R_AB_d7_032718_5',...
    'G:\OCGOL_stability_recall\I42R_1\I42R_AB_d8_032818_6',...
    'G:\OCGOL_stability_recall\I42R_1\I42R_AB_d9_032918_7'};
%cross session directory
crossdir{1} = 'G:\OCGOL_stability_recall\I42R_1\crossSession_update';

%ANIMAL #2
% I46
path_dir{2} = {'G:\OCGOL_stability_recall\I46\I46_AB_d1_062018_1',...
     'G:\OCGOL_stability_recall\I46\I46_AB_d2_062118_2',...
     'G:\OCGOL_stability_recall\I46\I46_AB_d3_062218_3',...
     'G:\OCGOL_stability_recall\I46\I46_AB_d6_062518_4',...
     'G:\OCGOL_stability_recall\I46\I46_AB_d7_062618_5',...
     'G:\OCGOL_stability_recall\I46\I46_AB_d8_062718_6',...
     'G:\OCGOL_stability_recall\I46\I46_AB_d9_062818_7'};
%cross session directory
crossdir{2} = 'G:\OCGOL_stability_recall\I46\crossSession_update';

%ANIMAL #3
%I45
path_dir{3} = {'G:\OCGOL_stability_recall\I45_RT\I45_RT_AB_d1_062018_1',...
    'G:\OCGOL_stability_recall\I45_RT\I45_RT_AB_d2_062118_2',...
    'G:\OCGOL_stability_recall\I45_RT\I45_RT_AB_d3_062218_3',...
    'G:\OCGOL_stability_recall\I45_RT\I45_RT_AB_d6_062518_4',...
    'G:\OCGOL_stability_recall\I45_RT\I45_RT_AB_d7_062618_5',...
    'G:\OCGOL_stability_recall\I45_RT\I45_RT_AB_d8_062718_6',...
    'G:\OCGOL_stability_recall\I45_RT\I45_RT_AB_d9_062818_7'};
%cross session directory
crossdir{3} = 'G:\OCGOL_stability_recall\I45_RT\crossSession_update';

%ANIMAL #4
%I42L 1
 path_dir{4} = {'G:\OCGOL_stability_recall\I42L_1\I42L_AB_d1_032118_1',...
     'G:\OCGOL_stability_recall\I42L_1\I42L_AB_d2_032218_2',...
     'G:\OCGOL_stability_recall\I42L_1\I42L_AB_d3_032318_3',...
     'G:\OCGOL_stability_recall\I42L_1\I42L_AB_d6_032618_4',...
     'G:\OCGOL_stability_recall\I42L_1\I42L_AB_d7_032718_5',...
     'G:\OCGOL_stability_recall\I42L_1\I42L_AB_d8_032818_6',...
     'G:\OCGOL_stability_recall\I42L_1\I42L_AB_d9_032918_7'};
%cross session directory
crossdir{4} = 'G:\OCGOL_stability_recall\I42L_1\crossSession_update';

%ANIMAL #5
%I47 LP
path_dir{5} = {'G:\OCGOL_stability_recall\I47_LP\I47_LP_AB_d1_062018_1',...
     'G:\OCGOL_stability_recall\I47_LP\I47_LP_AB_d2_062118_2',...
     'G:\OCGOL_stability_recall\I47_LP\I47_LP_AB_d3_062218_3',...
     'G:\OCGOL_stability_recall\I47_LP\I47_LP_AB_d6_062518_4',...
     'G:\OCGOL_stability_recall\I47_LP\I47_LP_AB_d7_062618_5',...
     'G:\OCGOL_stability_recall\I47_LP\I47_LP_AB_d8_062718_6',...
     'G:\OCGOL_stability_recall\I47_LP\I47_LP_AB_d9_062818_7'};
% %cross session directory
crossdir{5} = 'G:\OCGOL_stability_recall\I47_LP\crossSession_update';

%% LONG-TERM (30 day sessions) %%

%ANIMAL #1
%I47_LP
path_dir{1} = {'D:\OCGOL_learning_long_term\I47_LP\I47_LP_AB_d1_062018_1',...
     'D:\OCGOL_learning_long_term\I47_LP\I47_LP_AB_d6_062518_2',...
     'D:\OCGOL_learning_long_term\I47_LP\I47_LP_AB_d16_070518_3',...
     'D:\OCGOL_learning_long_term\I47_LP\I47_LP_AB_d20_070918_4',...
     'D:\OCGOL_learning_long_term\I47_LP\I47_LP_AB_d25_071318_5',...
     'D:\OCGOL_learning_long_term\I47_LP\I47_LP_AB_d30_071818_6'};
%cross session directory
crossdir{1} = 'D:\OCGOL_learning_long_term\I47_LP\crossSession_update';

%ANIMAL #2
%I45 RT
path_dir{2} = {'D:\OCGOL_learning_long_term\I45_RT\I45_RT_AB_d1_062018_1',...
     'D:\OCGOL_learning_long_term\I45_RT\I45_RT_AB_d6_062518_2',...
     'D:\OCGOL_learning_long_term\I45_RT\I45_RT_AB_d16_070518_3',...
     'D:\OCGOL_learning_long_term\I45_RT\I45_RT_AB_d20_070918_4',...
     'D:\OCGOL_learning_long_term\I45_RT\I45_RT_AB_d25_071318_5',...
     'D:\OCGOL_learning_long_term\I45_RT\I45_RT_AB_d30_071818_6'};
%cross session directory
crossdir{2} = 'D:\OCGOL_learning_long_term\I45_RT\crossSession_update';

%ANIMAL #3
%I46
path_dir{3} = {'D:\OCGOL_learning_long_term\I46\I46_AB_d1_062018_1',...
     'D:\OCGOL_learning_long_term\I46\I46_AB_d6_062518_2',...
     'D:\OCGOL_learning_long_term\I46\I46_AB_d16_070518_3',...
     'D:\OCGOL_learning_long_term\I46\I46_AB_d20_070918_4',...
     'D:\OCGOL_learning_long_term\I46\I46_AB_d25_071318_5',...
     'D:\OCGOL_learning_long_term\I46\I46_AB_d30_071818_6'};
%cross session directory
crossdir{3} = 'D:\OCGOL_learning_long_term\I46\crossSession_update';


%% Import variables and define options (set options to use to run global script) - LEARNING PARAMETERS

%run componenet registration across sessions
options.register = 0;

%whether to load place field data processed below
options.loadPlaceField_data = 1;

%load extracted ROI zooms/outlines
options.load_ROI_zooms_outlines = 1;

%visualize ROI outlines of matches across sessions
options.visualize_match = 0;

%load SCE data shuffled n=50/100 (re-shuffle later on cluster with n =1000)
options.loadSCE = 0;

%change the the parameters below for whether it's a learning or recall
%experiment

%all A and B trials used for learning (sessions determined below)
%use [1 2] for recall
options.selectTrial = [1 2];

%for use in global workspace
%selectTrial = options.selectTrial;

%flag to all A or B trial or only correct A or B trials
%all correct = 0 ==> uses trials 4,5 (set for learning data)
%all correct = 1 ==> uses trials 1,2 (set for recall data)
options.allCorrect = 1;

%this is just for controlling the display of labels across sessions/days
%doesn't control anything else
options.learning_data = 0;

%% Run processing of data for generation of Figure 4

for ii=[1 2 3]
    disp(['Running: ', num2str(ii)])
    OCGOL_global_remapping_V0_update(path_dir{ii},crossdir{ii},options)
end

%% Transients extraction for recall cohort as a control for the learning animals

% for ii=[1 2 3 4 5]
%     disp(['Running: ', num2str(ii)])
%     OCGOL_recall_remapping_Jason_export_transients_shortened_V0(path_dir{ii},crossdir{ii})
% end


