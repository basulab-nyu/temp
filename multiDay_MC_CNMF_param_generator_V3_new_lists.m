%% List of input files on cluster
%new set of input lists for paper data

% names = {'/beegfs/rz646/data/stacks/I56_RLTS_5AB_041019/1s-081',...
%         '/beegfs/rz646/data/stacks/I56_RTLS_5AB_041119/1s-084',...
%         '/beegfs/rz646/data/stacks/I56_RTLS_3A3B_041219/10s-087',...
%         '/beegfs/rz646/data/stacks/I56_RTLS_3A3B_041319/1s-090',...
%         '/beegfs/rz646/data/stacks/I56_RTLS_ABrand_no_punish_041519/1s-092',...
%         '/beegfs/rz646/data/stacks/I56_RTLS_ABrand_no_punish_041619/1s-093',...
%         '/beegfs/rz646/data/stacks/I56_RTLS_ABrand_punish_041719/1s-096'};
% 
% templateDir = '/scratch/rz646/data/stacks/I56_RLTS_5AB_041019_1';

% names = {'/beegfs/rz646/data/stacks/I57_RLTS_5AB_041019/1s-080',...
%     '/beegfs/rz646/data/stacks/I57_RTLS_5AB_041119/1s-083',...
%     '/beegfs/rz646/data/stacks/I57_RTLS_3A3B_041219/1s-086',...
%     '/beegfs/rz646/data/stacks/I57_RTLS_1A1B_041319/1s-089',...
%     '/beegfs/rz646/data/stacks/I57_RTLS_ABrand_no_punish_041519/1s-091',...
%     '/beegfs/rz646/data/stacks/I57_RTLS_ABrand_no_punish_041619/1s-095',...
%     '/beegfs/rz646/data/stacks/I57_RTLS_ABrand_punish_041719/1s-098'};
% 
% templateDir = '/scratch/rz646/data/stacks/I57_RLTS_5AB_041019_1';

% names = {'/beegfs/rz646/data/stacks/I57_LT_5A5B_041619/1s-094',...
%     '/beegfs/rz646/data/stacks/I57_LT_5A5B_041719/1s-097',...
%     '/beegfs/rz646/data/stacks/I57_LT_3A3B_041819/1s-100',...
%     '/beegfs/rz646/data/stacks/I57_LT_3A3B_041919/1s-101',...
%     '/beegfs/rz646/data/stacks/I57_LT_ABrand_no_punish_042019/1s-102',...
%     '/beegfs/rz646/data/stacks/I57_LT_ABrand_no_punish_042119/1s-083'...
%     '/beegfs/rz646/data/stacks/I57_LT_ABrand_punish_042219/1s-084',...
%     '/beegfs/rz646/data/stacks/I57_LT_ABrand_punish_042319/1s-085'};
% 
% templateDir = '/scratch/rz646/data/stacks/I57_LT_5A5B_041619_1';

% names = {'/beegfs/rz646/data/stacks/I54_LTRS_RF_d0_022219/1-036',...
%     '/beegfs/rz646/data/stacks/I54_LTRS_GOL1_d1_022319/1-038',...
%     '/beegfs/rz646/data/stacks/I54_LTRS_GOL1_d2_022419/1-041',...
%     '/beegfs/rz646/data/stacks/I54_LTRS_GOL1_d3_022519/1-043',...
%     '/beegfs/rz646/data/stacks/I54_LTRS_GOL2_d4_022619/1-045',...
%     '/beegfs/rz646/data/stacks/I54_LTRS_GOL2_d5_022719/1-047'...
%     '/beegfs/rz646/data/stacks/I54_LTRS_GOL2_d6_022819/1-049'};
% 
% templateDir = '/scratch/rz646/data/stacks/I54_LTRS_RF_d0_022219_1';
% 
% names = {'/beegfs/rz646/data/stacks/I55_RTLS_RF_d0_022219/1-035',...
%     '/beegfs/rz646/data/stacks/I55_RTLS_GOL1_d1_022319/1-037',...
%     '/beegfs/rz646/data/stacks/I55_RTLS_GOL1_d2_022419/1-039',...
%     '/beegfs/rz646/data/stacks/I55_RTLS_GOL1_d3_022519/1-042',...
%     '/beegfs/rz646/data/stacks/I55_RTLS_GOL2_d4_022619/1-044',...
%     '/beegfs/rz646/data/stacks/I55_RTLS_GOL2_d5_022719/1-046'...
%     '/beegfs/rz646/data/stacks/I55_RTLS_GOL2_d6_022819/1-048'};
% 
% templateDir = '/scratch/rz646/data/stacks/I55_RTLS_RF_d0_022219_1';

% names = {'/beegfs/rz646/data/stacks/I47_LP_AB_d1_062018/1MD-038',...
%     '/beegfs/rz646/data/stacks/I47_LP_AB_d2_062118/1MD-042',...
%     '/beegfs/rz646/data/stacks/I47_LP_AB_d3_062218/1MD-045',...
%     '/beegfs/rz646/data/stacks/I47_LP_AB_d6_062518/1MD-054',...
%     '/beegfs/rz646/data/stacks/I47_LP_AB_d7_062618/1MD-063',...
%     '/beegfs/rz646/data/stacks/I47_LP_AB_d8_062718/1MD-066',...
%     '/beegfs/rz646/data/stacks/I47_LP_AB_d9_062818/1MD-069'};
% 
% templateDir = '/scratch/rz646/data/stacks/I47_LP_AB_d1_062018_1';

% names = {'/beegfs/rz646/data/stacks/I42L_AB_d1_032118/1-032',...
%     '/beegfs/rz646/data/stacks/I42L_AB_d2_032218/1-041',...
%     '/beegfs/rz646/data/stacks/I42L_AB_d3_032318/1-053',...
%     '/beegfs/rz646/data/stacks/I42L_AB_d6_032618/1-063',...
%     '/beegfs/rz646/data/stacks/I42L_AB_d7_032718/1-079',...
%     '/beegfs/rz646/data/stacks/I42L_AB_d8_032818/1-021',...
%     '/beegfs/rz646/data/stacks/I42L_AB_d9_032918/1-032'};
% 
% templateDir = '/scratch/rz646/data/stacks/I42L_AB_d1_032118_1';

% names = {'/beegfs/rz646/data/stacks/I46_AB_d1_062018/1MD-039',...
%     '/beegfs/rz646/data/stacks/I46_AB_d2_062118/1MD-043',...
%     '/beegfs/rz646/data/stacks/I46_AB_d3_062218/1MD-047',...
%     '/beegfs/rz646/data/stacks/I46_AB_d6_062518/1MD-056',...
%     '/beegfs/rz646/data/stacks/I46_AB_d7_062618/1MD-065',...
%     '/beegfs/rz646/data/stacks/I46_AB_d8_062718/1MD-068',...
%     '/beegfs/rz646/data/stacks/I46_AB_d9_062818/1MD-072'};
% 
% templateDir = '/scratch/rz646/data/stacks/I46_AB_d1_062018_1';

% names = {'/beegfs/rz646/data/stacks/I45_RT_AB_d1_062018/1MD-041',...
%     '/beegfs/rz646/data/stacks/I45_RT_AB_d2_062118/1MD-044',...
%     '/beegfs/rz646/data/stacks/I45_RT_AB_d3_062218/1MD_2-050',...
%     '/beegfs/rz646/data/stacks/I45_RT_AB_d6_062518/1MD-055',...
%     '/beegfs/rz646/data/stacks/I45_RT_AB_d7_062618/1MD-064',...
%     '/beegfs/rz646/data/stacks/I45_RT_AB_d8_062718/1MD-067',...
%     '/beegfs/rz646/data/stacks/I45_RT_AB_d9_062818/1MD-073'};
% 
% templateDir = '/scratch/rz646/data/stacks/I45_RT_AB_d1_062018_1';
% 
% names = {'/scratch/rz646/data/stacks/MR1_Random_2022_03_01-001',...
%     '/scratch/rz646/data/stacks/MR1_Random_2022_03_02-002',...
%     '/scratch/rz646/data/stacks/MR1_RevAB_2022_03_03-001',...
%     '/scratch/rz646/data/stacks/MR1_RevRandom_2022_03_04-001',...
%     '/scratch/rz646/data/stacks/MR1_RevRandom_2022_03_06-001',...
%     '/scratch/rz646/data/stacks/MR1_RevRandom_2022_03_08-001',...
%     '/scratch/rz646/data/stacks/MR1_RevRandom_2022_03_10-001'};
% 
% templateDir = '/scratch/rz646/data/stacks/MR1_Random_2022_03_01-001_1';

% names = {'/scratch/rz646/data/stacks/MR2_Random_2022_03_03-001',...
%     '/scratch/rz646/data/stacks/MR2_Random_2022_03_04-001',...
%     '/scratch/rz646/data/stacks/MR2_RevAB_2022_03_05-001',...
%     '/scratch/rz646/data/stacks/MR2_RevRandom_2022_03_06-001',...
%     '/scratch/rz646/data/stacks/MR2_RevRandom_2022_03_08-001',...
%     '/scratch/rz646/data/stacks/MR2_RevRandom_2022_03_10-002',...
%     '/scratch/rz646/data/stacks/MR2_RevRandom_2022_03_12-001'};
% 
% templateDir = '/scratch/rz646/data/stacks/MR2_Random_2022_03_03-001';

% names = {'/scratch/rz646/data/stacks/MR4_Random_2022_03_05-001',...
%     '/scratch/rz646/data/stacks/MR4_Random_2022_03_06-001',...
%     '/scratch/rz646/data/stacks/MR4_RevAB_2022_03_07-002',...
%     '/scratch/rz646/data/stacks/MR4_RevRandom_2022_03_08-001',...
%     '/scratch/rz646/data/stacks/MR4_RevRandom_2022_03_09-001',...
%     '/scratch/rz646/data/stacks/MR4_RevRandom_2022_03_11-001',...
%     '/scratch/rz646/data/stacks/MR4_RevRandom_2022_03_13-001'};
% 
% templateDir = '/scratch/rz646/data/stacks/MR4_Random_2022_03_05-001';

%%add on sessions MR1
% names = {'/scratch/rz646/data/stacks/MR1_Random_2022_03_01-001',...
%     '/scratch/rz646/data/stacks/MR1_Random_2022_02_28-001',...
%     '/scratch/rz646/data/stacks/MR1_RevRandom_2022_03_05-001',...
%     '/scratch/rz646/data/stacks/MR1_RevRandom_2022_03_09-001'};
% 
% templateDir = '/scratch/rz646/data/stacks/MR1_Random_2022_03_01-001_1';

% %add on sessions MR2
% names = {'/scratch/rz646/data/stacks/MR2_Random_2022_03_03-001',...
%     '/scratch/rz646/data/stacks/MR2_Random_2022_03_02-001',...
%     '/scratch/rz646/data/stacks/MR2_RevRandom_2022_03_07-001',...
%     '/scratch/rz646/data/stacks/MR2_RevRandom_2022_03_13-001',...
%     '/scratch/rz646/data/stacks/MR2_RevRandom_2022_03_14-001'};
% 
% templateDir = '/scratch/rz646/data/stacks/MR2_Random_2022_03_03-001';

%add on sessions MR4
names = {'/scratch/rz646/data/stacks/MR4_Random_2022_03_05-001',...
    '/scratch/rz646/data/stacks/MR4_Random_2022_03_04-001',...
    '/scratch/rz646/data/stacks/MR4_RevRandom_2022_03_12-001'};

templateDir = '/scratch/rz646/data/stacks/MR4_Random_2022_03_05-001';

%% 
%which of many field acquired from that animal on that day
numField = 1;
           
%% Generate set of dir.list files with each directory name (for python input)

%make directory filepaths from which python will read to make stacks

%works
for ii = 1:size(names,2)
    %create text file
    fileID = fopen(['dir_',num2str(ii),'.list'], 'w');
    
    fprintf(fileID,names{ii});
    %close text file
    fclose(fileID);
    
end

%% Generate set of stack_param.config files for python stack build input

%generate the configuration files for the stack build

%works
for ii = 1:size(names,2)
    %create text file
    fileID = fopen(['stack_param_',num2str(ii),'.config'], 'w');
    %split each absolute location directory into subpart delimited by /
    splitName = strsplit(names{ii},'/');

    fprintf(fileID,'[fileNames]\n\n');
    fprintf(fileID,['exp_name: ',splitName{6},'_',num2str(ii), '\n']);
    fprintf(fileID,'save_directory: /scratch/rz646/data/stacks/\n');
    fprintf(fileID,'read_directory: /scratch/rz646/data/stacks/\n\n');
    
    fprintf(fileID,'[buildParam]\n\n');
    
    fprintf(fileID,'save_combined_stack = 0\n');
    fprintf(fileID,'split_stack = 0\n');
    fprintf(fileID,'split_every = 2000');
    
    %close text file
    fclose(fileID);
    
end

%% Generate MATLAB parameter files with whether MC options

%starting directory path of template
splitName = strsplit(names{1},'/');

%which sessions should be matched against Day 1
matchArray = [0 1 1 1 1 1 1];
matchArray = ones(1,size(names,2));
%don't align day 1
matchArray(1) = 0;

for ii = 1:size(names,2)
    %create text file
    fileID = fopen(['matlab_options_',num2str(ii),'.txt'], 'w');
    %split each absolute location directory into subpart delimited by /
    
    fprintf(fileID,['matchToDay1 = ',num2str(matchArray(ii)), '\n']);
    fprintf(fileID,['matchDir = /scratch/rz646/data/stacks/',splitName{6},'_',num2str(1)]);
    
    %fprintf(fileID,['matchDir = ',templateDir]);

    
    %close text file
    fclose(fileID);
    
end



